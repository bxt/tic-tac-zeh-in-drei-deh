(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{G2k8:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),c=n.n(r),o=n("DBIF"),i=n("Womt"),s=n("MHn+");const a=(e,t=o.a.NORMAL)=>Object(r.forwardRef)((function({blendFunction:n,opacity:o,...i},s){const a=Object(r.useMemo)(()=>new e(i),[i]);return Object(r.useLayoutEffect)(()=>{a.blendMode.blendFunction=n||t,void 0!==o&&(a.blendMode.opacity.value=o)},[n,a.blendMode,o]),c.a.createElement("primitive",{ref:s,object:a,dispose:null})})),u=(e,t)=>{const n=e[t];return Object(r.useMemo)(()=>{if(n instanceof i.Vector2)return(new i.Vector2).set(n.x,n.y);if(Array.isArray(n)){const[e,t]=n;return(new i.Vector2).set(e,t)}},[n])},l=()=>{try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},f=a(o.b,o.a.SCREEN),d=(a(o.c),Object(r.forwardRef)((function(e,t){const n=u(e,"offset"),i=Object(r.useMemo)(()=>new o.d({...e,offset:n}),[n,e]);return c.a.createElement("primitive",{ref:t,object:i,dispose:null})})),Object(r.forwardRef)((function({blendFunction:e=o.a.NORMAL},t){const n=Object(r.useMemo)(()=>new o.e(e),[e]);return c.a.createElement("primitive",{ref:t,object:n,dispose:null})})),a(o.f),a(o.g),Object(r.createContext)(null)),b=c.a.memo(Object(r.forwardRef)(({children:e,camera:t,scene:n,renderPriority:a=1,depthBuffer:u,stencilBuffer:f,multisampling:b=8,frameBufferType:m=i.HalfFloatType},j)=>{const{gl:O,scene:p,camera:h,size:w}=Object(s.d)();n=n||p,t=t||h;const[g,E]=Object(r.useMemo)(()=>{const e=new o.k(O,{depthBuffer:u,stencilBuffer:f,multisampling:l()?b:0,frameBufferType:m});e.addPass(new o.v(n,t));const r=new o.s(n,t);return e.addPass(r),[e,r]},[t,O,u,f,b,m,n]);Object(r.useEffect)(()=>null==g?void 0:g.setSize(w.width,w.height),[g,w]),Object(s.b)((e,t)=>g.render(t),a);const y=Object(r.useRef)();Object(r.useEffect)(()=>{let e;return y.current&&g&&(e=new o.l(t,...y.current.__objects),g.addPass(e),e.renderToScreen=!0),()=>{e&&(null==g||g.removePass(e))}},[g,t]);const v=Object(r.useMemo)(()=>({composer:g,normalPass:E,camera:t,scene:n}),[g,E,t,n]);return Object(r.useImperativeHandle)(j,()=>g,[g]),c.a.createElement(d.Provider,{value:v},c.a.createElement("group",{ref:y},e))}));Object(r.forwardRef)((function({target:e,depthTexture:t,...n},s){const{camera:a}=Object(r.useContext)(d),u=Object(r.useMemo)(()=>new o.h(a,n),[a,n]);return Object(r.useLayoutEffect)(()=>{if(e){const t=e instanceof i.Vector3?(new i.Vector3).set(e.x,e.y,e.z):(new i.Vector3).set(e[0],e[1],e[2]);u.target=t}t&&u.setDepthTexture(t.texture,t.packing)},[e,t,u]),c.a.createElement("primitive",{ref:s,object:u,dispose:null})})),a(o.i),Object(r.forwardRef)((function({active:e,...t},n){const i=u(t,"delay"),s=u(t,"duration"),a=u(t,"strength"),l=Object(r.useMemo)(()=>new o.m({...t,delay:i,duration:s,strength:a}),[i,s,t,a]);return Object(r.useLayoutEffect)(()=>{l.mode=e?t.mode||o.n.SPORADIC:o.n.DISABLED},[e,l,t.mode]),c.a.createElement("primitive",{ref:n,object:l,dispose:null})})),Object(r.forwardRef)((function(e,t){const{camera:n}=Object(r.useContext)(d),i=Object(r.useMemo)(()=>new o.o(n,e.sun,e),[n,e]);return c.a.createElement("primitive",{ref:t,object:i,dispose:null})})),Object(r.forwardRef)((function({size:e,...t},n){const i=Object(r.useMemo)(()=>new o.p(t),[t]);return Object(r.useLayoutEffect)(()=>{e&&i.setSize(e.width,e.height)},[i,e]),c.a.createElement("primitive",{ref:n,object:i,dispose:null})})),a(o.q),a(o.r,o.a.COLOR_DODGE),Object(r.forwardRef)((function({selection:e=[],selectionLayer:t=10,blendFunction:n,patternTexture:i,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:u,hiddenEdgeColor:l,width:f,height:b,kernelSize:m,blur:j,xRay:O,...p},h){const{scene:w,camera:g}=Object(r.useContext)(d),E=Object(r.useMemo)(()=>new o.t(w,g,{blendFunction:n,patternTexture:i,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:u,hiddenEdgeColor:l,width:f,height:b,kernelSize:m,blur:j,xRay:O}),[n,j,g,s,b,l,m,i,a,w,u,f,O]);return Object(r.useEffect)(()=>{E.clearSelection(),E.setSelection(Array.isArray(e)?e.map(e=>e.current):[e.current])},[E,e]),Object(r.useEffect)(()=>{E.selectionLayer=t},[E,t]),c.a.createElement("primitive",{ref:h,object:E,dispose:null})})),Object(r.forwardRef)((function({granularity:e=5},t){const n=Object(r.useMemo)(()=>new o.u(e),[e]);return c.a.createElement("primitive",{ref:t,object:n,dispose:null})})),a(o.A,o.a.OVERLAY),Object(r.forwardRef)((function({selection:e=[],selectionLayer:t=10,lights:n=[],luminanceThreshold:i,luminanceSmoothing:s,intensity:a,width:u,height:l,kernelSize:f},b){0===n.length&&console.warn("SelectiveBloom requires lights to work.");const{scene:m,camera:j}=Object(r.useContext)(d),O=Object(r.useMemo)(()=>new o.B(m,j,{blendFunction:o.a.SCREEN,luminanceThreshold:i,luminanceSmoothing:s,intensity:a,width:u,height:l,kernelSize:f}),[j,l,a,f,s,i,m,u]);return Object(r.useEffect)(()=>{O.selection.set(Array.isArray(e)?e.map(e=>e.current):[e.current])},[O,e]),Object(r.useEffect)(()=>{O.selection.layer=t},[O,t]),Object(r.useEffect)(()=>(n.forEach(e=>((e,t)=>{e.current.layers.enable(t.selection.layer)})(e,O)),()=>n.forEach(e=>((e,t)=>{e.current.layers.disable(t.selection.layer)})(e,O))),[O,n,t]),c.a.createElement("primitive",{ref:b,object:O,dispose:null})})),a(o.C),Object(r.forwardRef)((function(e,t){const{camera:n,normalPass:i}=Object(r.useContext)(d),s=Object(r.useMemo)(()=>new o.z(n,i.renderTarget.texture,{blendFunction:o.a.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,scale:.5,bias:.5,...e}),[n,i.renderTarget.texture,e]);return c.a.createElement("primitive",{ref:t,object:s,dispose:null})})),Object(r.forwardRef)((function({preset:e=o.y.HIGH,edgeDetectionMode:t=o.j.COLOR},n){const i=Object(s.c)(o.x,""),a=Object(r.useMemo)(()=>new o.w(...i,e,t),[i,e,t]);return c.a.createElement("primitive",{ref:n,object:a,dispose:null})})),Object(r.forwardRef)((function({textureSrc:e,texture:t,...n},a){const u=Object(s.c)(i.TextureLoader,e);Object(r.useLayoutEffect)(()=>{u.encoding=i.sRGBEncoding,u.wrapS=u.wrapT=i.RepeatWrapping},[u]);const l=Object(r.useMemo)(()=>new o.D({...n,texture:u||t}),[n,u,t]);return c.a.createElement("primitive",{ref:a,object:l,dispose:null})})),a(o.E),a(o.F);var m=c.a.createElement;t.default=function(){return m(b,null,m(f,{luminanceThreshold:.3,luminanceSmoothing:.9,height:300}),m(f,{luminanceThreshold:0,luminanceSmoothing:.9,height:100,intensity:.1}))}}}]);